{% load permissions %}

{% with request.resolver_match.url_name as url_name %}



{% if request.user.is_authenticated %}

    <!-- Profile -->
    <li class="nav-item">
        <a class="nav-link {% if url_name == 'profile' %}active{% endif %}" 
           href="{% url 'profile' %}">
            ğŸ‘¤ ĞŸÑ€Ğ¾Ñ„Ñ–Ğ»ÑŒ
        </a>
    </li>

    <!-- Booking Cabinet -->
    {% if request.user|has_permission:"CB" %}
    <li class="nav-item">
        <a class="nav-link {% if url_name == 'create_book' %}active{% endif %}" 
           href="{% url 'create_book' %}">
            ğŸ”– Ğ—Ğ°Ğ±Ñ€Ğ¾Ğ½ÑĞ²Ğ°Ñ‚Ğ¸
        </a>
    </li>
    {% endif %}

    <!-- View Bookings -->
    {% if request.user|has_permission:"RB" %}
    <li class="nav-item">
        <a class="nav-link {% if url_name == 'resource' %}active{% endif %}" 
           href="{% url 'resource' %}">
            ğŸ“‹ Ğ‘Ñ€Ğ¾Ğ½ÑĞ²Ğ°Ğ½Ğ½Ñ
        </a>
    </li>
    {% endif %}

    <!-- View Schedule -->
    {% if request.user|has_permission:"RS" %}
    <li class="nav-item">
        <a class="nav-link {% if url_name == 'schedule_view' %}active{% endif %}" 
           href="{% url 'schedule_view' %}">
            ğŸ“… Ğ Ğ¾Ğ·ĞºĞ»Ğ°Ğ´
        </a>
    </li>
    {% endif %}

    <!-- Add Schedule (Admin) -->
    {% if request.user|has_permission:"CS" %}
    <li class="nav-item">
        <a class="nav-link {% if url_name == 'add_schedule' %}active{% endif %}" 
           href="{% url 'add_schedule' %}">
            â• Ğ”Ğ¾Ğ´Ğ°Ñ‚Ğ¸ Ğ·Ğ°Ğ½ÑÑ‚Ñ‚Ñ
        </a>
    </li>
    {% endif %}

    <!-- Logout -->
    <li class="nav-item">
        <a class="nav-link" href="{% url 'logout_view' %}">
            ğŸšª Ğ’Ğ¸Ñ…Ñ–Ğ´
        </a>
    </li>

{% else %}

    <!-- Sign In -->
    <li class="nav-item">
        <a class="nav-link {% if url_name == 'sign_in' %}active{% endif %}" 
           href="{% url 'sign_in' %}">
            ğŸ” Ğ’Ñ…Ñ–Ğ´
        </a>
    </li>

    <!-- Sign Up -->
    <li class="nav-item">
        <a class="nav-link {% if url_name == 'sign_up' %}active{% endif %}" 
           href="{% url 'sign_up' %}">
            ğŸš€ Ğ ĞµÑ”ÑÑ‚Ñ€Ğ°Ñ†Ñ–Ñ
        </a>
    </li>

{% endif %}

{% endwith %}
